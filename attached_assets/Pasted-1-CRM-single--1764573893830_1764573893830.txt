1. Общая постановка задачи

Создать веб-приложение персональной CRM для одного пользователя (single-user, без регистрации), которое:
	1.	Управляет контактами.
	2.	Отслеживает встречи и взаимодействия.
	3.	Сегментирует людей по типам и ценности.
	4.	Строит матрицу «важность контакта × моё внимание».
	5.	Реализует 10 уровней внимания к контакту.
	6.	Оценивает ценность контакта по вкладу и потенциалу.
	7.	Считает тепловую карту контактов (зелёный / жёлтый / красный).
	8.	Даёт список приоритетных действий (кому написать, кого “реактивировать”).

MVP — web-app с локальной/встроенной БД, адаптированный под десктоп.

Технологии (предпочтение, если Replit позволяет):
	•	Backend: Node.js (Express) или Python (FastAPI/Flask).
	•	DB: SQLite или PostgreSQL (через Prisma/SQLAlchemy).
	•	Frontend: React (Vite/CRA) или Next.js (если удобно в Replit).
	•	Без авторизации/логина (один пользователь).

⸻

2. Модель данных

2.1. Таблица contacts

Минимальные поля:
	•	id (UUID / integer, PK)
	•	full_name (string)
	•	short_name (string, опционально)
	•	phone (string, nullable)
	•	email (string, nullable)
	•	social_links (JSON/text – массив ссылок)
	•	tags (JSON/text – список тегов: “Инвестор”, “Партнёр”, “Ученик” и т.п.)

Роль и тип:
	•	role_tags (JSON/text – список ролей: Семья, Друг, Партнёр, Инвестор, Ученик, Команда, Медиа, Эксперт)

Ценность по вкладу и потенциалу:
	•	contribution_score (integer 0–15) — балл по вкладу.
	•	potential_score (integer 0–15) — балл по потенциалу.
	•	contribution_class (char, A/B/C/D) — автоматически по contribution_score.
	•	potential_class (char, A/B/C/D) — автоматически по potential_score.
	•	value_category (string, например AA, AB, BA, BC и т.п.) — конкатенация contribution_class + potential_class.

Приоритизация и внимание:
	•	importance_level (char/string: A/B/C или 1–5) — важность контакта в системе пользователя.
	•	attention_level (integer 1–10) — текущий уровень внимания (см. раздел 3).
	•	desired_frequency_days (integer) — желаемый интервал meaningful-контакта в днях (например 14/30/90).

Динамика связи и тепловая карта:
	•	last_contact_date (date, nullable) — дата последнего содержательного контакта (встреча, звонок, личное сообщение).
	•	response_quality (integer 0–3):
	•	0 — не отвечает
	•	1 — отвечает редко/сильно запаздывает
	•	2 — отвечает нормально
	•	3 — отвечает быстро/сам проявляет инициативу
	•	relationship_energy (integer 1–5) — субъективная сила/энергия связи.
	•	attention_trend (integer -1/0/1) — тренд внимания за последние ~90 дней:
	•	-1 — падает
	•	0 — стабилен
	•	1 — растёт
	•	heat_index (float 0–1) — вычисляемый интегральный индекс.
	•	heat_status (string: 'green' | 'yellow' | 'red') — цвет тепловой карты.

Служебные:
	•	created_at (datetime)
	•	updated_at (datetime)

⸻

2.2. Таблица interactions (взаимодействия)
	•	id (PK)
	•	contact_id (FK → contacts.id)
	•	date (datetime)
	•	type (string): call, meeting, message, event, gift, intro, other
	•	channel (string): phone, telegram, whatsapp, email, offline, …
	•	note (text) — краткое описание.
	•	is_meaningful (boolean) — флаг meaningful-контакта (участвует в расчётах).
	•	created_at, updated_at

При добавлении interaction с is_meaningful = true:
	•	обновлять contacts.last_contact_date
	•	по желанию пересчитывать response_quality/relationship_energy вручную (форма редактирования).

⸻

2.3. Таблица reminders (опционально, для follow-up)

Простая:
	•	id
	•	contact_id
	•	due_date (datetime)
	•	type (follow_up, birthday, check_in, …)
	•	note
	•	done (boolean)

⸻

3. 10 уровней внимания (константы в коде)

Зашить в приложении справочник ATTENTION_LEVELS (id 1–10):
	1.	1 — Присутствие в поле: лайк, реакция, комментарий, пересылка.
	2.	2 — Косвенное касание: массовая рассылка, отметка в сторис, общий канал.
	3.	3 — Единичный контакт: личное сообщение без повода, короткий звонок.
	4.	4 — Поводной отклик: поздравления с ДР, праздником, событием.
	5.	5 — Малый персональный жест: персонализированное сообщение, подборка, рекомендация книги/видео.
	6.	6 — Вклад в пользу: интро, совет, помощь по делу, небольшой осознанный подарок.
	7.	7 — Приглашение в своё поле: корпоративные события, закрытые встречи.
	8.	8 — Совместное время: обед, прогулка, поездка, перелёт.
	9.	9 — Доступ к личному пространству: дом, семейные события, глубокие личные разговоры.
	10.	10 — Вложение в путь: менторство, партнёрство, продвижение, «ставка» на человека.

attention_level у контакта — текущий средний/типичный уровень внимания, который пользователь реально даёт.

⸻

4. Расчёт ценности контакта (вклад и потенциал)

Сделать форму/панель, где пользователь руками оценивает вклад и потенциал по ряду критериев, а приложение считает баллы и классы.

4.1. Вклад (contribution_score 0–15)

Критерии, каждый 0–3:
	•	financial_contribution — финвклад (покупки/инвестиции):
0 = нет; 1 = до $10K; 2 = $10–100K; 3 = $100K+.
	•	network_help — помощь связями/интро (0–3 по силе и качеству).
	•	tactical_help — помощь действиями (решил задачу, выделил ресурсы).
	•	strategic_support — стратегическая поддержка (усилил решения, был рядом в переломный момент).
	•	loyalty_support — лояльность, защита, конфиденциальность.

contribution_score = sum(5 критериев) (0–15).

Классификация:
	•	12–15 → contribution_class = 'A'
	•	8–11 → 'B'
	•	4–7 → 'C'
	•	0–3 → 'D'

4.2. Потенциал (potential_score 0–15)

Тоже 0–3 за каждый:
	•	personal_perspective — перспективность как личности.
	•	resources — ресурсность (деньги, влияние, доступ).
	•	network — нетворк (ширина + качество связей).
	•	synergy — синергия с вектором пользователя.
	•	system_role_potential — потенциал занять системную роль (партнёр, лидер, советник).

potential_score = sum(5 критериев) (0–15).

Классификация:
	•	12–15 → potential_class = 'A'
	•	8–11 → 'B'
	•	4–7 → 'C'
	•	0–3 → 'D'

value_category = contribution_class + potential_class (например, AA, BA, AC, …).

⸻

5. Алгоритм тепловой карты (Heat Index)

Нужно реализовать функцию на backend (или в общем модуле), которая по данным контакта возвращает:
	•	heat_index (0–1)
	•	heat_status (green / yellow / red)

5.1. Входные параметры (из contacts)
	•	last_contact_date
	•	desired_frequency_days
	•	response_quality (0–3)
	•	relationship_energy (1–5)
	•	attention_trend (-1/0/1)

Вычисляем: